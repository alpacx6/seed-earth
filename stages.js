// stages.js
export function rand(min, max){ return min + Math.random()*(max-min); }

export function baseStages7(){
  return [
    {
      name: "Stage 1 - 메마른 초입",
      length: 3600,
      bg: { skyTop:[255,190,120], skyBot:[220,140,80], haze:[90,55,20], theme:"desert" },
      ruleText: "추가 규칙 없음",
      stageSpeedMul: 1.00,
      toxicSteps: [],
      windZones: null,
      acidRain: null,
      snow: null,
      steps: [
        { x: 260, y: 370, w: 170, h: 24 }, { x: 520, y: 330, w: 140, h: 24 }, { x: 760, y: 290, w: 140, h: 24 },
        { x: 1040, y: 355, w: 220, h: 24 }, { x: 1360, y: 315, w: 160, h: 24 }, { x: 1620, y: 275, w: 160, h: 24 },
        { x: 1920, y: 345, w: 220, h: 24 }, { x: 2260, y: 305, w: 160, h: 24 }, { x: 2520, y: 265, w: 160, h: 24 },
        { x: 2820, y: 345, w: 240, h: 24 }, { x: 3180, y: 315, w: 180, h: 24 },
      ],
      spikes: [740, 1240, 2100, 3040],
      orbs: [{ x: 920, baseY: 240 }, { x: 1760, baseY: 220 }, { x: 3340, baseY: 210 }],
      seedXs: [560, 820, 1460, 1700, 2360, 2620, 3300],
      bgImage: "background/stage1.png",

    },

    {
      name: "Stage 2 - 말라버린 강줄기",
      length: 4000,
      bg: { skyTop:[210,180,160], skyBot:[165,140,120], haze:[75,60,45], theme:"dryriver" },
      ruleText: "추가 규칙 없음",
      stageSpeedMul: 1.00,
      toxicSteps: [],
      windZones: null,
      acidRain: null,
      snow: null,
      steps: [
        { x: 280, y: 365, w: 160, h: 24 }, { x: 560, y: 315, w: 140, h: 24 }, { x: 840, y: 270, w: 140, h: 24 },
        { x: 1140, y: 335, w: 220, h: 24 }, { x: 1480, y: 290, w: 160, h: 24 }, { x: 1760, y: 250, w: 160, h: 24 },
        { x: 2080, y: 330, w: 230, h: 24 }, { x: 2440, y: 285, w: 150, h: 24 }, { x: 2700, y: 240, w: 150, h: 24 },
        { x: 3040, y: 310, w: 240, h: 24 }, { x: 3440, y: 270, w: 190, h: 24 }, { x: 3740, y: 235, w: 170, h: 24 },
      ],
      spikes: [720, 1320, 2320, 3120, 3560],
      orbs: [{ x: 980, baseY: 220 }, { x: 1960, baseY: 210 }, { x: 3860, baseY: 205 }],
      seedXs: [620, 900, 1540, 1800, 2520, 2780, 3460, 3800],
      bgImage: "background/stage2.png",
    },

    {
      name: "Stage 3 - 독성 대기와 폐허",
      length: 4500,
      bg: { skyTop:[80,90,110], skyBot:[45,50,70], haze:[65,40,90], theme:"toxiccity" },
      ruleText: "독성 발판: 닿으면 3초간 1초마다 HP -10",
      stageSpeedMul: 1.00,
      toxicSteps: [3,6,10,13], // ✅ 일부 발판을 독성 발판으로
      windZones: null,
      acidRain: null,
      snow: null,
      steps: [
        { x: 260, y: 365, w: 160, h: 22 }, { x: 520, y: 325, w: 150, h: 22 }, { x: 780, y: 295, w: 150, h: 22 },
        { x: 1040, y: 335, w: 240, h: 22 }, { x: 1360, y: 305, w: 180, h: 22 }, { x: 1600, y: 280, w: 170, h: 22 },
        { x: 1840, y: 250, w: 180, h: 22 }, { x: 2100, y: 295, w: 240, h: 22 }, { x: 2440, y: 275, w: 160, h: 22 },
        { x: 2700, y: 250, w: 160, h: 22 }, { x: 2960, y: 300, w: 260, h: 22 }, { x: 3280, y: 275, w: 200, h: 22 },
        { x: 3560, y: 245, w: 190, h: 22 }, { x: 3860, y: 220, w: 170, h: 22 }, { x: 4100, y: 265, w: 240, h: 22 },
      ],
      spikes: [680, 1760, 2360, 3280, 3720, 4160],
      orbs: [{ x: 760, baseY: 210 }, { x: 2880, baseY: 185 }, { x: 4380, baseY: 200 }],
      seedXs: [640, 940, 1600, 1860, 2540, 2800, 3500, 3840, 4200],
      bgImage: "background/stage3.png",

    },

    {
      name: "Stage 4 - 모래폭풍 지대",
      length: 4800,
      bg: { skyTop:[180,150,120], skyBot:[110,80,55], haze:[95,70,40], theme:"sandstorm" },
      ruleText: "회오리: 닿으면 2초 행동불가 + 5초 이속 80% 감소",
      stageSpeedMul: 1.00,
      toxicSteps: [],
      windZones: { count: 5 }, // ✅ 회오리 생성
      acidRain: null,
      snow: null,
      steps: [
        { x: 320, y: 350, w: 150, h: 22 }, { x: 650, y: 300, w: 120, h: 22 }, { x: 980, y: 250, w: 120, h: 22 },
        { x: 1260, y: 320, w: 200, h: 22 }, { x: 1600, y: 270, w: 150, h: 22 }, { x: 1900, y: 225, w: 140, h: 22 },
        { x: 2250, y: 310, w: 230, h: 22 }, { x: 2640, y: 260, w: 130, h: 22 }, { x: 2940, y: 215, w: 130, h: 22 },
        { x: 3260, y: 280, w: 240, h: 22 }, { x: 3650, y: 245, w: 170, h: 22 }, { x: 4020, y: 200, w: 150, h: 22 },
        { x: 4340, y: 260, w: 220, h: 22 }, { x: 4620, y: 250, w: 140, h: 22 },
      ],
      spikes: [760,1120,1480,1760,2100,2460,2860,3180,3520,3880,4280,4560],
      orbs: [{ x: 840, baseY: 205 }, { x: 1700, baseY: 190 }, { x: 2600, baseY: 180 }, { x: 3400, baseY: 190 }, { x: 4200, baseY: 200 }, { x: 4700, baseY: 210 }],
      seedXs: [700, 1000, 1680, 2050, 2750, 3000, 3650, 4050, 4400, 4700],
      bgImage: "background/stage4.png",
    },

    {
      name: "Stage 5 - 최심부: 붕괴한 연구지",
      length: 5200,
      bg: { skyTop:[60,70,90], skyBot:[20,20,35], haze:[40,30,50], theme:"labruin" },
      ruleText: "기본 이동속도 -20%",
      stageSpeedMul: 0.80, // ✅ 규칙 반영
      toxicSteps: [],
      windZones: null,
      acidRain: null,
      snow: null,
      steps: [
        { x: 320, y: 355, w: 140, h: 20 }, { x: 640, y: 300, w: 115, h: 20 }, { x: 960, y: 245, w: 115, h: 20 },
        { x: 1280, y: 320, w: 190, h: 20 }, { x: 1620, y: 265, w: 135, h: 20 }, { x: 1920, y: 215, w: 130, h: 20 },
        { x: 2280, y: 305, w: 210, h: 20 }, { x: 2680, y: 255, w: 125, h: 20 }, { x: 2980, y: 205, w: 125, h: 20 },
        { x: 3320, y: 295, w: 230, h: 20 }, { x: 3720, y: 235, w: 160, h: 20 }, { x: 4080, y: 200, w: 140, h: 20 },
        { x: 4400, y: 280, w: 210, h: 20 }, { x: 4760, y: 235, w: 160, h: 20 }, { x: 5060, y: 205, w: 120, h: 20 },
      ],
      spikes: [720,900,1180,1500,1760,2060,2400,2600,2920,3160,3480,3700,4020,4300,4580,4880,5100],
      orbs: [{ x: 820, baseY: 200 }, { x: 1480, baseY: 185 }, { x: 2140, baseY: 175 }, { x: 2860, baseY: 170 }, { x: 3600, baseY: 180 }, { x: 4480, baseY: 190 }, { x: 5160, baseY: 205 }],
      seedXs: [780,1020,1600,1960,2700,3000,3720,4100,4420,4760,5100],
      bgImage: "background/stage5.png",

    },

    {
      name: "Stage 6 - 산성비 구간",
      length: 5500,
      bg: { skyTop:[52,62,82], skyBot:[12,12,27], haze:[35,25,45], theme:"acidtown" },
      ruleText: "산성비: 3초마다 3초간 내림(반복) — 비 오는 동안 HP가 서서히 감소",
      stageSpeedMul: 1.00,
      toxicSteps: [],
      windZones: null,
      acidRain: { onMs: 3000, offMs: 3000, dps: 2 }, // ✅ 단순/명확하게 구현
      snow: null,
      steps: [
        { x: 300, y: 350, w: 135, h: 20 }, { x: 620, y: 295, w: 110, h: 20 }, { x: 940, y: 240, w: 110, h: 20 },
        { x: 1260, y: 315, w: 185, h: 20 }, { x: 1600, y: 260, w: 130, h: 20 }, { x: 1900, y: 210, w: 125, h: 20 },
        { x: 2260, y: 300, w: 205, h: 20 }, { x: 2660, y: 250, w: 120, h: 20 }, { x: 2960, y: 200, w: 120, h: 20 },
        { x: 3300, y: 290, w: 225, h: 20 }, { x: 3700, y: 230, w: 155, h: 20 }, { x: 4060, y: 195, w: 135, h: 20 },
        { x: 4380, y: 275, w: 205, h: 20 }, { x: 4740, y: 230, w: 155, h: 20 }, { x: 5040, y: 200, w: 115, h: 20 },
        { x: 5300, y: 270, w: 160, h: 20 },
      ],
      spikes: [700,880,1160,1480,1740,2040,2380,2580,2900,3140,3460,3680,4000,4280,4560,4860,5080,5280],
      orbs: [{ x: 800, baseY: 195 }, { x: 1460, baseY: 180 }, { x: 2120, baseY: 170 }, { x: 2840, baseY: 165 }, { x: 3580, baseY: 175 }, { x: 4460, baseY: 185 }, { x: 5140, baseY: 200 }, { x: 5420, baseY: 210 }],
      seedXs: [760,1000,1580,1940,2680,2980,3700,4080,4400,4740,5080,5360],
      bgImage: "background/stage6.png",

    },

    {
      name: "Stage 7 - 얼어붙은 죽음",
      length: 5800,
      bg: { skyTop:[180,210,255], skyBot:[40,70,120], haze:[120,170,220], theme:"snow" },
      ruleText: "기본 이동속도 -30% + 10~15초마다 2초 빙결",
      stageSpeedMul: 0.70,
      toxicSteps: [],
      windZones: null,
      acidRain: null,
      snow: { freezeMinMs: 10000, freezeMaxMs: 15000, freezeMs: 2000 },
      steps: [
        { x: 280, y: 345, w: 130, h: 20 }, { x: 600, y: 290, w: 105, h: 20 }, { x: 920, y: 235, w: 105, h: 20 },
        { x: 1240, y: 310, w: 180, h: 20 }, { x: 1580, y: 255, w: 125, h: 20 }, { x: 1880, y: 205, w: 120, h: 20 },
        { x: 2240, y: 295, w: 200, h: 20 }, { x: 2640, y: 245, w: 115, h: 20 }, { x: 2940, y: 195, w: 115, h: 20 },
        { x: 3280, y: 285, w: 220, h: 20 }, { x: 3680, y: 225, w: 150, h: 20 }, { x: 4040, y: 190, w: 130, h: 20 },
        { x: 4360, y: 270, w: 200, h: 20 }, { x: 4720, y: 225, w: 150, h: 20 }, { x: 5020, y: 195, w: 110, h: 20 },
        { x: 5280, y: 265, w: 155, h: 20 }, { x: 5600, y: 235, w: 140, h: 20 },
      ],
      spikes: [680,860,1140,1460,1720,2020,2360,2560,2880,3120,3440,3660,3980,4260,4540,4840,5060,5260,5480],
      orbs: [{ x: 780, baseY: 190 }, { x: 1440, baseY: 175 }, { x: 2100, baseY: 165 }, { x: 2820, baseY: 160 }, { x: 3560, baseY: 170 }, { x: 4440, baseY: 180 }, { x: 5120, baseY: 195 }, { x: 5400, baseY: 205 }, { x: 5720, baseY: 215 }],
      seedXs: [740,980,1560,1920,2660,2960,3680,4060,4380,4720,5060,5340,5660],
      bgImage: "background/stage7.png",

    },
  ];
}
