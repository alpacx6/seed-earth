:root{
  --bg:#0b1020;
  --panel:#0f1a35;
  --line:rgba(255,255,255,.12);
  --text:rgba(255,255,255,.92);
  --sub:rgba(255,255,255,.65);
  --good:#72ffb7;
  --warn:#ff6b6b;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: radial-gradient(1200px 800px at 20% 20%, #1b2a60 0%, #0b1020 55%, #050714 100%);
  color:var(--text);
  font-family: system-ui, -apple-system, "Pretendard", "Malgun Gothic", sans-serif;
}

.wrap{
  display:flex;
  min-height:100vh;
  padding:18px;
  gap:18px;
}

.hud{
  width:260px;
  border:1px solid var(--line);
  border-radius:18px;
  background: linear-gradient(180deg, rgba(18,30,70,.75), rgba(10,14,28,.75));
  box-shadow: 0 18px 40px rgba(0,0,0,.45);
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.title{
  margin:0;
  font-size:26px;
  line-height:1.05;
  letter-spacing:.2px;
}

.hudBox{
  border:1px solid var(--line);
  border-radius:14px;
  padding:12px;
  background: rgba(0,0,0,.18);
}
.row{
  display:flex;
  justify-content:space-between;
  padding:6px 0;
  border-bottom:1px dashed rgba(255,255,255,.10);
}
.row:last-child{ border-bottom:none; }
.row span{ color:var(--sub); }

.cardsTitle,.hintTitle{
  margin-top:8px;
  color:var(--sub);
  font-weight:700;
  font-size:13px;
  letter-spacing:.2px;
}
.ownedCards{
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px;
  min-height:110px;
  background: rgba(0,0,0,.18);
  overflow:auto;
}
.ownedCard{
  display:flex;
  gap:8px;
  padding:8px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  margin-bottom:8px;
}
.ownedCard .emo{ font-size:18px; width:24px; text-align:center; }

.hint{
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px;
  background: rgba(0,0,0,.18);
  color:rgba(255,255,255,.85);
  min-height:64px;
}

.stageRule{
  margin-top:auto;
  border:1px solid rgba(114,255,183,.25);
  border-radius:14px;
  padding:10px;
  background: rgba(114,255,183,.06);
  color:rgba(255,255,255,.88);
  display:none;
}
.stageRule.is-on{ display:block; }
.stageRule .tag{
  display:inline-block;
  font-weight:900;
  color:var(--good);
  margin-right:8px;
}

.gameArea{
  position:relative;
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
}
#gameCanvas{
  border-radius:18px;
  border:1px solid var(--line);
  background:#000;
  box-shadow: 0 22px 60px rgba(0,0,0,.55);
}

/* overlays */
.overlay, .loading{
  position:absolute;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
}
.overlay.is-open, .loading.is-open{ display:flex; }

.overlayPanel{
  width:min(880px, 94%);
  border-radius:18px;
  border:1px solid var(--line);
  background: rgba(10,16,32,.82);
  backdrop-filter: blur(8px);
  padding:16px;
}
.overlayTop{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
}
.overlayTitle{ font-weight:900; }
.overlayTimer{ color:rgba(255,255,255,.75); }

.cardRow{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:12px;
}
.card{
  border-radius:16px;
  border:1px solid rgba(255,255,255,.14);
  padding:14px;
  background: rgba(255,255,255,.05);
  cursor:pointer;
  transition: transform .08s ease;
}
.card:hover{ transform: translateY(-2px); }
.card .rarity{ font-size:12px; color:rgba(255,255,255,.75); }
.card .name{ font-weight:900; margin-top:6px; }
.card .emoji{ font-size:34px; margin-top:8px; }
.card .desc{ font-size:13px; color:rgba(255,255,255,.75); margin-top:6px; }

.r-common{ box-shadow: 0 0 0 1px rgba(255,255,255,.06) inset; }
.r-rare{ box-shadow: 0 0 0 2px rgba(90,180,255,.25) inset; }
.r-epic{ box-shadow: 0 0 0 2px rgba(190,110,255,.25) inset; }
.r-legendary{ box-shadow: 0 0 0 2px rgba(255,190,90,.28) inset; }

.loadingBox{
  border-radius:18px;
  border:1px solid var(--line);
  background: rgba(10,16,32,.85);
  padding:18px 18px;
  width:min(520px, 92%);
  display:flex;
  align-items:center;
  gap:12px;
}
.spinner{
  width:18px; height:18px;
  border-radius:50%;
  border:2px solid rgba(255,255,255,.22);
  border-top-color: rgba(255,255,255,.75);
  animation: spin .8s linear infinite;
}
@keyframes spin{ to{ transform: rotate(360deg);} }
.loadingText{ color:rgba(255,255,255,.85); }

/* warn */
.warnOverlay{
  position:absolute;
  top:14px;
  left:50%;
  transform: translateX(-50%);
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(255,107,107,.25);
  background: rgba(255,107,107,.10);
  color: rgba(255,255,255,.92);
  display:none;
}
.warnOverlay.is-on{ display:block; }

/* dialogue */
.dialogue{
  position:absolute;
  left:18px;
  bottom:18px;
  width:min(420px, 92%);
  border-radius:18px;
  border:1px solid var(--line);
  background: rgba(10,16,32,.86);
  backdrop-filter: blur(10px);
  padding:14px;
  display:none;
}
.dialogue.is-open{ display:block; }

.dlgTop{
  display:flex;
  gap:12px;
  align-items:center;
}
.dlgAvatar{
  width:84px; height:84px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  object-fit:cover;
}
.dlgName{ font-weight:900; font-size:16px; }
.dlgRole{ color:rgba(255,255,255,.62); font-size:12px; margin-top:2px; }
.dlgBtns{ margin-left:auto; display:flex; gap:8px; }
.btn{
  border-radius:12px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color:rgba(255,255,255,.86);
  padding:8px 10px;
  cursor:pointer;
}
.btn:hover{ background: rgba(255,255,255,.08); }

.dlgText{
  margin-top:10px;
  line-height:1.45;
  color: rgba(255,255,255,.88);
  min-height:70px;
}
.dlgBottom{
  display:flex;
  justify-content:flex-end;
  align-items:center;
  margin-top:10px;
}
.dlgNext{
  opacity:0;
  color: rgba(255,255,255,.72);
}
